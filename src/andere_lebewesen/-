import pygame
import random

width = 800
height = 600
screen = pygame.display.set_mode((width,height))
clock = pygame.time.Clock()
pygame.display.set_caption("Particle")

# global variables
particle_colors = ["red","white","blue","yellow"]
particle_num = 2

def distance(particles: list):
    # Distanz berechnen von den nachbarn der Partikel
    data = [p.position for p in particles]
    distances = []
    
    for i in range(len(data) - 1):  # Stoppe bei len(data)-1, da wir i+1 betrachten
        x1, y1 = data[i]
        x2, y2 = data[i + 1]

        
        # Manhatten-Distanz
        distance_x = abs(x1 - x2)
        distance_y = abs(y1 - y2)
        #---------------------------

        # pos1: x:200 y: 200; pos2: x: 100 y: 100
        # dx: 100 dy: 100

        #----------------------

        distances.append((i, distance_x, distance_y))
    
    for i, dx, dy in distances:
        print("Punkt0",data[i],"Punkt1",data[i + 1])
        print(f"Distanz zwischen Punkt {i} und {i + 1}: dx={dx}, dy={dy}")

       
        


class Particle(object):
    def __init__(self,position: tuple,color: str,velocity: float):
        self.position = position
        self.color = color
        self.velocity = velocity
        self.particle_size = 3
        self.pos_x,self.pos_y = self.position

    def movingSystem(self,particles):
        # Distanz berechnen von den nachbarn der Partikel
        self.pos_x,self.pos_y = self.position
        data = [p.position for p in particles]
        distances = []
        
        for i in range(len(data) - 1):  # Stoppe bei len(data)-1, da wir i+1 betrachten
            x1, y1 = data[i]
            x2, y2 = data[i + 1]

            
            # Absoluter Wert berechnen
            distance_x = abs(x1 - x2)
            distance_y = abs(y1 - y2)
            
            distances.append((i, distance_x, distance_y))

    

    def update(self):
        self.pos_x,self.pos_y = self.position
        pygame.draw.circle(screen,self.color,self.position,self.particle_size)
        self.pos_x += 1

particles = [Particle((random.randint(0,width),random.randint(0,height)),random.choice(particle_colors),1) for _ in range(particle_num)]

distance(particles)

p: object = Particle((0,0),"white",1)

# game loop
run: bool = True
while run:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run: bool = False
            exit()
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_q:
                run: bool = False
                exit()

    # drawing all particles
    for particle in particles:
        particle.update()
        particle.movingSystem(particles)
    p.movingSystem(particles)

    clock.tick(60)
    pygame.display.update()


pygame.quit()

